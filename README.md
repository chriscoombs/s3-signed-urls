# s3-signed-urls

API Gateway access (GET/PUT) to S3 objects using signed URLs, fronted by CloudFront (which bypasses the API Gateway payload size limit of 10 MB).

## Getting Started

This project can be deployed from the AWS Serverless Application Repository or from the CloudFormation template (resource.template.yaml) available on [GitHub](https://github.com/chriscoombs/s3-signed-urls).

## Usage

To download/upload an object into S3, execute a GET/PUT request using the CloudFront distribution URL* suffixed with the API Gateway stage name (e.g. _latest_) and the object path.

For example, to upload a file called cat.gif to S3 with the key funny/animals/cat.gif:

`curl -L -X PUT https://your-distribution.cloudfront.net/latest/funny/animals/cat.gif --upload-file "cat.gif"`

To download that same file:

`curl -L -X GET https://your-distribution.cloudfront.net/latest/funny/animals/cat.gif -o cat.gif`

*_CloudFront distribution URL can be found in the CloudFront console_

### How It Works

In order to bypass the 10 MB API Gateway limit, Lambda creates an S3 signed URL which it returns (as a 307 redirect), allowing the client to download/upload directly to S3.

## Disclaimer

This is a pre-production example only. Please note, access to the API generated by this project is uncontrolled, it is recommended the API be secured before deploying into Production.