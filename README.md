# s3-signed-urls

API Gateway access (GET/PUT) to S3 objects using signed URLs. This bypasses the API Gateway payload size limit of 10 MB.

## Getting Started

This project can be deployed the AWS Serverless Application Repository or from the CloudFormation template (resource.template.json) available on [GitHub](https://github.com/chriscoombs/s3-signed-urls).

## Usage

To download/upload an object into S3, execute a GET/PUT request using the Stage URL* suffixed with the object path.

For example, to upload a file called cat.gif to S3 with the key funny/animals/cat.gif:

`curl -L -X PUT https://yourapi.execute-api.us-east-1.amazonaws.com/prod/funny/animals/cat.gif --upload-file "cat.gif"`

To download that same file:

`curl -L -X GET https://yourapi.execute-api.us-east-1.amazonaws.com/prod/funny/animals/cat.gif -o cat.gif`

*_Stage URL can be found under API Gateway > s3-signed-urls > Stages > Prod_

### How It Works

In order to bypass the 10 MB API Gateway limit, Lambda creates an S3 signed URL which it returns (as a 307 redirect), allowing the client to download/upload directly to S3.

## Disclaimer

Access to the API generated by this project is uncontrolled. It is recommended the API be secured before deploying into Production, see https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-control-access-to-api.html.