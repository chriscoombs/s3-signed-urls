# s3-signed-urls

API Gateway access (GET/PUT) to S3 objects using signed URLs. This bypasses the API Gateway payload size limit of 10 MB.

## Getting Started

This project can either be deployed using the CloudFormation template (resource.template.json) or via the AWS Serverless Application Repository.

### Resources

This project will create the following resources:

* API Gateway
 * Rest API
 * Deployment
 * Stage
* Lambda
 * Function
 * IAM Role
 * Permission
* S3 Bucket

## Usage

To download/upload an object into S3, execute a GET/PUT request using the Stage URL suffixed with the object path.

For example, to upload a file called cat.gif to S3 with the key funny/animals/cat.gif:

`curl -X PUT https://h76uh0mhch.execute-api.us-east-1.amazonaws.com/prod/funny/animals/cat.gif`

To download that same file:

`curl -X GET https://h76uh0mhch.execute-api.us-east-1.amazonaws.com/prod/funny/animals/cat.gif`

### How It Works

In order to bypass the 10 MB API Gateway limit, Lambda creates an S3 signed URL which it returns (as a 307 redirect), allowing the client to download/upload directly to S3.

## Disclaimer

Access to the API generated by this project is uncontrolled. It is recommended the API be secured before deploying into Production, see https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-control-access-to-api.html.

## License

This project is licensed under the MIT License
